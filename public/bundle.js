const $=e=>document.querySelector(e),$$=e=>document.querySelectorAll(e);let cart=[],modalQt=1,modal=0;function closeModal(){$(".pizzaWindowArea").style.opacity=0,setTimeout(()=>{$(".pizzaWindowArea").style.display="none"},500)}pizzaJson.map((e,i)=>{let t=$(".models .pizza-item").cloneNode(!0);t.querySelector(".pizza-item--img img").src=e.img,t.querySelector(".pizza-item--price").innerHTML="R$ "+e.price.toFixed(2),t.querySelector(".pizza-item--name").innerHTML=e.name,t.querySelector(".pizza-item--desc").innerHTML=e.description,t.setAttribute("data-key",i),t.querySelector("a").addEventListener("click",e=>{e.preventDefault();let i=e.target.closest(".pizza-item").getAttribute("data-key");modalQt=1,modalKey=i,$(".pizzaBig img").src=pizzaJson[i].img,$(".pizzaInfo h1").innerHTML=pizzaJson[i].name,$(".pizzaInfo--desc").innerHTML=pizzaJson[i].description,$(".pizzaInfo--actualPrice").innerHTML="R$ "+pizzaJson[i].price.toFixed(2),$(".pizzaInfo--size.selected").classList.remove("selected"),$$(".pizzaInfo--size").forEach((e,t)=>{2==t&&e.classList.add("selected"),e.querySelector("span").innerHTML=pizzaJson[i].sizes[t]}),$(".pizzaInfo--qt").innerHTML=modalQt,$(".pizzaWindowArea").style.opacity=0,$(".pizzaWindowArea").style.display="flex",setTimeout(()=>{$(".pizzaWindowArea").style.opacity=1},200)}),$(".pizza-area").append(t)});
$$(".pizzaInfo--cancelButton, .pizzaInfo--cancelMobileButton").forEach(e=>{e.addEventListener("click",closeModal)}),$(".pizzaInfo--qtmenos").addEventListener("click",()=>{modalQt>1&&(modalQt--,$(".pizzaInfo--qt").innerHTML=modalQt)}),$(".pizzaInfo--qtmais").addEventListener("click",()=>{modalQt++,$(".pizzaInfo--qt").innerHTML=modalQt}),$$(".pizzaInfo--size").forEach(e=>{e.addEventListener("click",()=>{$(".pizzaInfo--size.selected").classList.remove("selected"),e.classList.add("selected")})}),$(".pizzaInfo--addButton").addEventListener("click",()=>{let e=parseInt($(".pizzaInfo--size.selected").getAttribute("data-key")),t=pizzaJson[modalKey].id+"."+e,a=cart.findIndex(e=>e.identifier==t);a>-1?cart[a].qt+=modalQt:cart.push({identifier:t,id:pizzaJson[modalKey].id,size:e,qt:modalQt}),closeModal(),updateCart()}),$(".menu--openner").addEventListener("click",()=>{cart.length>0&&($("aside").style.left="0")}),$(".menu--closer").addEventListener("click",()=>{$("aside").style.left="100vh"});
function updateCart(){if($(".menu--openner span").innerHTML=cart.length,cart.length>0){$("aside").classList.add("show"),$(".cart").innerHTML="";let e=0,t=0,a=0;for(let t in cart){let a=pizzaJson.find(e=>e.id==cart[t].id);e+=a.price*cart[t].qt;let r,c=$(".models .cart--item").cloneNode(!0);switch(cart[t].size){case 0:r="P";break;case 1:r="M";break;case 2:r="G"}let i=`${a.name} (${r})`;c.querySelector("img").src=a.img,c.querySelector(".cart--item-nome").innerHTML=i,c.querySelector(".cart--item--qt").innerHTML=cart[t].qt,c.querySelector(".cart--item-qtmenos").addEventListener("click",()=>{cart[t].qt>1?cart[t].qt--:cart.splice(t,1),updateCart()}),c.querySelector(".cart--item-qtmais").addEventListener("click",()=>{cart[t].qt++,updateCart()}),$(".cart").append(c)}t=.1*e,a=e-t,$(".subtotal span:last-child").innerHTML="R$ "+e.toFixed(2),$(".desconto span:last-child").innerHTML="R$ "+t.toFixed(2),$(".total span:last-child").innerHTML="R$ "+a.toFixed(2)}else $("aside").classList.remove("show"),$("aside").style.left="100vh"}